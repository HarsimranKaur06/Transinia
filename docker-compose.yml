services:
  meeting-bot:
    build: .
    container_name: meeting-bot
    ports:
      - "8001:8001"                # Expose FastAPI on host port 8001
    env_file:
      - ./backend/.env             # Load environment variables from backend/.env
    volumes:
      - ./backend/transcripts:/app/transcripts   # Map transcripts folder
      - ./backend/outputs:/app/outputs           # Map outputs folder
    # Optional: map samples or other backend resources if needed
    # - ./backend/samples:/app/samples

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
      args:
        # bake the container hostname of the backend into the build as a default
        NEXT_PUBLIC_BACKEND_URL: "http://meeting-bot:8001"
    ports:
      - "3000:3000"
    depends_on:
      - meeting-bot
